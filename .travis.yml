language: bash

#sudo: true  # no virtualenv for these tests
sudo: required
dist: trusty

os:
  - linux

env:
  - TEST_CMD="invoke --list"
  - TEST_CMD="invoke install_file_metadata_spm --yes install_pywikibot --yes install_file_metadata_bot --yes"  # trusty only
  - TEST_CMD="invoke install_file_metadata_pip --yes install_pywikibot --yes install_file_metadata_bot --yes"  # trusty only, needs openjdk-7-jre
  #- TEST_CMD="invoke install_pywikibot --yes install_file_metadata_git --yes install_file_metadata_bot --yes"
  - TEST_CMD="invoke install_pywikibot --yes install_file_metadata_git --yes"
#  - TEST_CMD="invoke install_docker --yes configure_docker"
  - TEST_CMD="invoke configure_docker"
#  - TEST_CMD="invoke configure_docker test_docker"

before_install:
  - sudo apt-get -qq update
  - sudo apt-get install -y openjdk-7-jre

install:
  - sudo pip install invoke

#before_script:
#  - curl -L "http://downloads.sourceforge.net/shunit2/shunit2-2.0.3.tgz" | tar zx

script: 
  - $TEST_CMD
